<!DOCTYPE HTML>
<html lang="zh-cn">
<head>
	<meta charset="UTF-8">
	<title>淡入淡出的图片没有循环</title>
	<style type="text/css">
		#demo{
			width:300px;
			height:200px;
			background: red;
			filter:alpha(opacity:30);
			opacity:0.3;
		}
		#demo img{
			width: 300px;
			height: 200px;
		}
	</style>
	
</head>
<body>
	<div id= "demo"><img src="img/1.jpg"></div>
	
</body>
	<script>	
	var alpha=30;
	var timer=null;
	var oDemo=document.getElementsByTagName('div');//作用域问题
	console.log(oDemo[0]);
	window.onload=function  () {
		
		oDemo[0].onmouseover=function  () {
			startMove(100);
		}
		oDemo[0].onmouseout=function  () {
			startMove(30);
		}
	}
	
	function startMove(iTarget){
		clearInterval(timer);
		timer=setInterval(function(){
			var speed=0;
			if(alpha<iTarget){
				speed=10;
			}else{
				speed=-10;
			}

			if(alpha==iTarget){
				clearInterval(timer);
			}else{
				alpha+=speed;
				oDemo[0].style.filter="alpha(opacity:"+alpha+")";
				oDemo[0].style.opacity=alpha/100;
			};
			//判断物体透明度，做出运动选择；
		},30);
	};
	</script>
</html>